
@{
    ViewBag.Title = "ShowClaimUser";
    Layout = "~/Views/MasterLayout/MasterUser.cshtml";
}


<div id="page-wrapper">
    <div class="row">
        <div class="col-lg-12">
            <h1 class="page-header">NIP : @Session["user_nip"].ToString()</h1>
        </div>
        <!-- /.col-lg-12 -->
    </div>
    <!-- /.row -->
    <div class="row">
        <div class="col-lg-12">
            <div class="panel panel-primary">
                <div class="panel-body">
                    <table class="table table-striped table-bordered table-sm" id="dataTables-Claim">
                        <thead>
                            <tr>
                                <th scope="col" width="100px" height=25px >ID Claim</th>
                                <th scope="col" width="150px" height=25px>Tipe Claim</th>
                                <th scope="col" width="100px" height=25px>Tanggal</th>
                                <th scope="col" width="230px" height="25px">Nama Pasien</th>
                                <th scope="col" width="150px" height=25px>Total Tagihan</th>
                                <th scope="col" width="50px" height=25px>Detail</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal" tabindex="-1" role="dialog" id="mymodal">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">View Detail Claim</h3>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form id="claimdetail">
                    <table>
                        <tr>
                            <td scope="col" width="180px" height="50px"><span>Tipe Medis</span></td>
                            <td><label id="tipe"></label></td>
                        </tr>
                        <tr>
                            <td scope="col" width="180px" height="50px"><span>NIP</span></td>
                            <td><label id="nip"></label></td>
                        </tr>
                        <tr>
                            <td scope="col" width="180px" height="50px"><span>Nama Pasien</span></td>
                            <td><label id="npasien"></label></td>
                        </tr>
                        <tr>
                            <td scope="col" width="180px" height="50px"><span>Hubungan Dengan Pasien</span></td>
                            <td><label id="hbgn"></label></td>
                        </tr>
                        <tr>
                            <td scope="col" width="180px" height="50px"><span>Alamat RS</span></td>
                            <td><label>:</label></td>
                            <td><textarea id="alamat" readonly style="width:300px; height:100px; margin-left:-93px"></textarea></td>
                        </tr>
                        <tr>
                            <td scope="col" width="180px" height="50px"><span>No. Telp</span></td>
                            <td><label id="notlp"></label></td>
                        </tr>
                        <tr>
                            <td scope="col" width="180px" height="50px"><span>Tanggal Rawat</span></td>
                            <td><label id="tglrwt"></label></td>
                        </tr>
                        <tr>
                            <td scope="col" width="180px" height="50px"><span>Total Biaya</span></td>
                            <td><label id="total"></label></td>
                        </tr>
                    </table>
                    @*<div class="form-group">
                        <span>Tipe Medis</span>
                        <span style="margin-left:100px">:&nbsp;</span>
                        <label id="tipe"></label>
                    </div>

                    <div class="form-group">
                        <span>NIP</span>
                        <span style="margin-left:145px">:&nbsp;</span>
                        <label id="nip"></label>
                    </div>

                    <div class="form-group">
                        <span>Nama Pasien</span>
                        <span style="margin-left:85px">:&nbsp;</span>
                        <label id="npasien"></label>
                    </div>

                    <div class="form-group">
                        <span>Hubungan Dengan Pasien</span>
                        <span style="margin-left:5px">:&nbsp;</span>
                        <label id="hbgn"></label>
                    </div>

                    <div class="form-group">
                        <span>Alamat RS</span>
                        <span style="margin-left:103px">:&nbsp;</span><span>
                        <textarea id="alamat" style="width:350px; top:auto "   readonly></textarea></span>
                    </div>

                    <div class="form-group">
                        <span>No.Telp RS</span>
                        <span style="margin-left:100px">:&nbsp;</span>
                        <label id="notlp"></label>
                    </div>

                    <div class="form-group">
                        <span>Tanggal Rawat</span>
                        <span style="margin-left:79px">:&nbsp;</span>
                        <label id="tglrwt"></label>
                    </div>

                    <div class="form-group">
                        <span>Total Tagihan</span>
                        <span style="margin-left:90px">:&nbsp;</span>
                        <label id="total"></label>
                    </div>*@

                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
@section script{
    <script type="text/javascript">
        refresh();    
        function refresh() {
             $.get(
                '@Url.Action("ShowClaim")',
                 function (data) {
                     $("#dataTables-Claim tbody").empty();
                     $.each(data, function (i, model) {
                         var date = `${model.value}`
                         var rows = `<tr>
                                        <td height=20px>${model.id_klaim_medis}</td>
                                        <td height=20px >${model.id_tipe}</td>
                                        <td height=20px >${date}</td>
                                        <td height=20px >${model.nama_pasien}</td>
                                        <td height=20px >${model.total_tagihan}</td>
                                        <td height=20px >
                                            <a id=${model.id_klaim_medis} style="text-align:center" class="glyphicon glyphicon-eye-open"  href="#" data-toggle="modal" data-target="#mymodal" />
                                        </td>
                                    </tr >`;

                         $("#dataTables-Claim tbody").append(rows);
                 });
            });
        }

        $().ready(function () {
            
            $('#dataTables-Claim').DataTable({
                responsive: true,
                searching: true
            });
            
        });

        $("#dataTables-Claim tbody").on("click", "a", function (e) {
            $.get(`GetClaim/${e.target.id}`, function (data) {
                $.each(data, function (i, model) {
                    $("#tipe").html(": "+`${model.id_tipe}`);
                    $("#nip").html(": " +`${model.NIP}`);
                    $("#npasien").html(": " +`${model.nama_pasien}`);
                    $("#hbgn").html(": " +`${model.hubungan_pasien}`);
                    $("#alamat").html(`${model.alamat_rs}`);
                    $("#notlp").html(": " +`${model.no_tlp}`);
                    $("#tglrwt").html(": " +`${model.value}`);
                    $("#total").html(": " +`${model.total_tagihan}`);
                });
            });
        });
    </script>
}
